<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>ApeTag</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          ApeTag
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../files/apetag_rb.html">apetag.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Superclass:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>Contains all of the ApeItems found in the filename/file given. <a
            href="ApeTag.html#MAX_SIZE">MAX_SIZE</a> and <a
            href="ApeTag.html#MAX_ITEM_COUNT">MAX_ITEM_COUNT</a> constants are
            recommended defaults, they can be increased if necessary.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-check_id3-3D">check_id3=</a></li>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#attribute-i-check_id3">check_id3</a></li>
              <li><a target="docwin" href="#method-i-exists-3F">exists?</a></li>
              <li><a target="docwin" href="#method-i-fields">fields</a></li>
              <li><a target="docwin" href="#attribute-i-file">file</a></li>
              <li><a target="docwin" href="#attribute-i-filename">filename</a></li>
              <li><a target="docwin" href="#method-i-has_id3-3F">has_id3?</a></li>
              <li><a target="docwin" href="#method-i-pretty_print">pretty_print</a></li>
              <li><a target="docwin" href="#method-i-raw">raw</a></li>
              <li><a target="docwin" href="#method-i-remove-21">remove!</a></li>
              <li><a target="docwin" href="#attribute-i-tag_data">tag_data</a></li>
              <li><a target="docwin" href="#attribute-i-tag_footer">tag_footer</a></li>
              <li><a target="docwin" href="#attribute-i-tag_header">tag_header</a></li>
              <li><a target="docwin" href="#attribute-i-tag_item_count">tag_item_count</a></li>
              <li><a target="docwin" href="#attribute-i-tag_size">tag_size</a></li>
              <li><a target="docwin" href="#attribute-i-tag_start">tag_start</a></li>
              <li><a target="docwin" href="#method-i-update">update</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FILE_OBJ_METHODS</td>
                    <td>=</td>
                    <td class='context-item-value'>%w'close seek read pos write truncate'</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>FOOTER_FLAGS</td>
                    <td>=</td>
                    <td class='context-item-value'>"\x00\x00\x80"</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>HEADER_FLAGS</td>
                    <td>=</td>
                    <td class='context-item-value'>"\x00\x00\xA0"</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ID3_GENRES</td>
                    <td>=</td>
                    <td class='context-item-value'>
                      'Blues, Classic Rock, Country, Dance, Disco, Funk, Grunge, 
                      Hip-Hop, Jazz, Metal, New Age, Oldies, Other, Pop, R & B, Rap, Reggae, 
                      Rock, Techno, Industrial, Alternative, Ska, Death Metal, Prank, Soundtrack,
                      Euro-Techno, Ambient, Trip-Hop, Vocal, Jazz + Funk, Fusion, Trance, 
                      Classical, Instrumental, Acid, House, Game, Sound Clip, Gospel, Noise, 
                      Alternative Rock, Bass, Soul, Punk, Space, Meditative, Instrumental Pop, 
                      Instrumental Rock, Ethnic, Gothic, Darkwave, Techno-Industrial, Electronic,
                      Pop-Fol, Eurodance, Dream, Southern Rock, Comedy, Cult, Gangsta, Top 40,
                      Christian Rap, Pop/Funk, Jungle, Native US, Cabaret, New Wave, Psychadelic,
                      Rave, Showtunes, Trailer, Lo-Fi, Tribal, Acid Punk, Acid Jazz, Polka, 
                      Retro, Musical, Rock & Roll, Hard Rock, Folk, Folk-Rock, National Folk, 
                      Swing, Fast Fusion, Bebop, Latin, Revival, Celtic, Bluegrass, Avantgarde, 
                      Gothic Rock, Progressive Rock, Psychedelic Rock, Symphonic Rock, Slow Rock,
                      Big Band, Chorus, Easy Listening, Acoustic, Humour, Speech, Chanson, Opera,
                      Chamber Music, Sonata, Symphony, Booty Bass, Primus, Porn Groove, Satire, 
                      Slow Jam, Club, Tango, Samba, Folklore, Ballad, Power Ballad, Rhytmic Soul,
                      Freestyle, Duet, Punk Rock, Drum Solo, Acapella, Euro-House, Dance Hall, 
                      Goa, Drum & Bass, Club-House, Hardcore, Terror, Indie, BritPop, Negerpunk, 
                      Polsk Punk, Beat, Christian Gangsta Rap, Heavy Metal, Black Metal, 
                      Crossover, Contemporary Christian, Christian Rock, Merengue, Salsa, 
                      Thrash Metal, Anime, Jpop, Synthpop'.split(',').collect{|g| g.strip}
                    </td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>ID3_GENRES_HASH</td>
                    <td>=</td>
                    <td class='context-item-value'>CICPHash.new(255.chr)</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>MAX_ITEM_COUNT</td>
                    <td>=</td>
                    <td class='context-item-value'>64</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>MAX_SIZE</td>
                    <td>=</td>
                    <td class='context-item-value'>8192</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>MP3_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>Regexp.new('\.mp3\z')</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>PREAMBLE</td>
                    <td>=</td>
                    <td class='context-item-value'>"APETAGEX\xD0\x07\x00\x00"</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>RECOMMENDED_KEYS</td>
                    <td>=</td>
                    <td class='context-item-value'>
                      %w'Title Artist Album Year Comment Genre Track Subtitle
                      Publisher Conductor Composer Copyright Publicationright File EAN/UPC ISBN
                      Catalog LC Media Index Related ISRC Abstract Language Bibliography
                      Introplay Dummy' << 'Debut Album' << 'Record Date' << 'Record Location'
                    </td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>YEAR_RE</td>
                    <td>=</td>
                    <td class='context-item-value'>Regexp.new('\d{4}')</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-check_id3'>check_id3</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-file'>file</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-filename'>filename</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-tag_data'>tag_data</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-tag_footer'>tag_footer</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-tag_header'>tag_header</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-tag_item_count'>tag_item_count</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-tag_size'>tag_size</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-tag_start'>tag_start</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-check_id3-3D'>
                <a name='method-c-check_id3-3D'></a>
                <div class='synopsis'>
                  <span class='name'>check_id3=</span>
                  <span class='arguments'>(flag)</span>
                </div>
                <div class='description'>
                  
                  <p>Set whether to check for id3 tags by default on file objects (defaults to
                  true)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-check_id3-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-check_id3-3D-source'><span class="ruby-comment"># File apetag.rb, line 270</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">check_id3=</span>(<span class="ruby-identifier">flag</span>)&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ApeTagError</span>, <span class="ruby-string">&quot;check_id3 must be boolean&quot;</span> <span class="ruby-keyword">unless</span> [<span class="ruby-keyword">true</span>, <span class="ruby-keyword">false</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">flag</span>)&#x000A;  <span class="ruby-identifier">@@check_id3</span> = <span class="ruby-identifier">flag</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(filename, check_id3 = nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Set the filename or file object to operate on.  If the object has all
                  methods in <a href="ApeTag.html#FILE_OBJ_METHODS">FILE_OBJ_METHODS</a>, it
                  is treated as a file, otherwise, it is treated as a filename. If the
                  filename is invalid, Errno::ENOENT or Errno::EINVAL will probably be raised
                  when calling methods. Optional argument <a
                  href="ApeTag.html#attribute-i-check_id3">#check_id3</a> checks for ID3
                  tags. If <a href="ApeTag.html#attribute-i-check_id3">#check_id3</a> is not
                  specified and filename is a file object, the <a
                  href="ApeTag.html">ApeTag</a> default is used. If <a
                  href="ApeTag.html#attribute-i-check_id3">#check_id3</a> is not specified
                  and filename is a filename, it checks for ID3 tags only if  the filename
                  ends with “.mp3”. If files have APE tags but no ID3 tags, ID3 tags will
                  never be added. If files have neither tag, <a
                  href="ApeTag.html#attribute-i-check_id3">#check_id3</a> will decide whether
                  to add an ID3 tag. If files have both tags, make sure <a
                  href="ApeTag.html#attribute-i-check_id3">#check_id3</a> is true or it will
                  miss both tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File apetag.rb, line 285</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">check_id3</span> = <span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-constant">FILE_OBJ_METHODS</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span> <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>)}&#x000A;    <span class="ruby-ivar">@file</span> = <span class="ruby-identifier">filename</span>&#x000A;    <span class="ruby-ivar">@check_id3</span> = <span class="ruby-identifier">check_id3</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">@@check_id3</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">check_id3</span> &#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@filename</span> = <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">to_s</span>&#x000A;    <span class="ruby-ivar">@check_id3</span> = <span class="ruby-identifier">check_id3</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> (<span class="ruby-constant">MP3_RE</span>.<span class="ruby-identifier">match</span>(<span class="ruby-ivar">@filename</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">check_id3</span> &#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-exists-3F'>
                <a name='method-i-exists-3F'></a>
                <div class='synopsis'>
                  <span class='name'>exists?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Check the file for an APE tag.  Returns true or false. Raises <a
                  href="ApeTagError.html">ApeTagError</a> for corrupt tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exists-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exists-3F-source'><span class="ruby-comment"># File apetag.rb, line 296</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exists?</span>&#x000A;  <span class="ruby-ivar">@has_tag</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">access_file</span>(<span class="ruby-string">&#39;rb&#39;</span>){<span class="ruby-identifier">has_tag</span>} <span class="ruby-operator">:</span> <span class="ruby-ivar">@has_tag</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-fields'>
                <a name='method-i-fields'></a>
                <div class='synopsis'>
                  <span class='name'>fields</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>A CICPHash of ApeItems found in the file, or an empty CICPHash if the file
                  doesn&#39;t have an APE tag.  Raises <a
                  href="ApeTagError.html">ApeTagError</a> for corrupt tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-fields-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-fields-source'><span class="ruby-comment"># File apetag.rb, line 316</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">fields</span>&#x000A;  <span class="ruby-ivar">@fields</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">access_file</span>(<span class="ruby-string">&#39;rb&#39;</span>){<span class="ruby-identifier">get_fields</span>}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-has_id3-3F'>
                <a name='method-i-has_id3-3F'></a>
                <div class='synopsis'>
                  <span class='name'>has_id3?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Check the file for an ID3 tag.  Returns true or false. Raises <a
                  href="ApeTagError.html">ApeTagError</a> for corrupt tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-has_id3-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-has_id3-3F-source'><span class="ruby-comment"># File apetag.rb, line 301</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_id3?</span>&#x000A;  <span class="ruby-identifier">exists?</span>&#x000A;  <span class="ruby-identifier">id3</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&#39;&#39;</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-pretty_print'>
                <a name='method-i-pretty_print'></a>
                <div class='synopsis'>
                  <span class='name'>pretty_print</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Pretty print tags, with one line per field, showing key and value.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-pretty_print-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-pretty_print-source'><span class="ruby-comment"># File apetag.rb, line 321</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">pretty_print</span>&#x000A;  <span class="ruby-keyword">begin</span>&#x000A;    <span class="ruby-identifier">fields</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">sort_by</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">key</span>}.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{value.key}: #{value.join(&#39;, &#39;)}&quot;</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)&#x000A;  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ApeTagError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>&#x000A;    <span class="ruby-node">&quot;CORRUPT TAG!: #{e.message}&quot;</span>&#x000A;  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EINVAL</span>&#x000A;    <span class="ruby-string">&quot;FILE NOT FOUND!&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-raw'>
                <a name='method-i-raw'></a>
                <div class='synopsis'>
                  <span class='name'>raw</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The raw APEv2 + ID3v1.1 tag.  If one or the other is empty that part will
                  be missing. Raises <a href="ApeTagError.html">ApeTagError</a> for corrupt
                  tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-raw-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-raw-source'><span class="ruby-comment"># File apetag.rb, line 333</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">raw</span>&#x000A;  <span class="ruby-identifier">exists?</span> &#x000A;  <span class="ruby-node">&quot;#{tag_header}#{tag_data}#{tag_footer}#{id3}&quot;</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-remove-21'>
                <a name='method-i-remove-21'></a>
                <div class='synopsis'>
                  <span class='name'>remove!</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Remove an APE tag from a file, if one exists. Returns true.  Raises <a
                  href="ApeTagError.html">ApeTagError</a> for corrupt tags.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-remove-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-remove-21-source'><span class="ruby-comment"># File apetag.rb, line 308</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove!</span>&#x000A;  <span class="ruby-identifier">access_file</span>(<span class="ruby-string">&#39;rb+&#39;</span>){<span class="ruby-identifier">file</span>.<span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">tag_start</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">has_tag</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">has_id3?</span>}&#x000A;  <span class="ruby-ivar">@has_tag</span>, <span class="ruby-ivar">@fields</span>, <span class="ruby-ivar">@id3</span>, <span class="ruby-ivar">@tag_size</span>, <span class="ruby-ivar">@tag_start</span>, <span class="ruby-ivar">@tag_data</span>, <span class="ruby-ivar">@tag_header</span>, <span class="ruby-ivar">@tag_footer</span>, <span class="ruby-ivar">@tag_item_count</span> = []&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-update'>
                <a name='method-i-update'></a>
                <div class='synopsis'>
                  <span class='name'>update</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Yields a CICPHash of ApeItems found in the file, or an empty CICPHash if
                  the file doesn&#39;t have an APE tag.  This hash should be modified (not
                  reassigned) inside the block.  An APEv2+ID3v1.1 tag with the new fields
                  will overwrite the previous tag.  If the file doesn&#39;t have an APEv2
                  tag, one will be created and appended to it. If the file doesn&#39;t have
                  an ID3v1.1 tag, one will be generated from the <a
                  href="ApeTag.html">ApeTag</a> fields and appended to it.  If the file
                  already has an ID3v1.1 tag, the data in it is ignored, and it is
                  overwritten.  Raises <a href="ApeTagError.html">ApeTagError</a> if either
                  the existing tag is invalid or the tag to be written would be invalid.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-update-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-update-source'><span class="ruby-comment"># File apetag.rb, line 346</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">access_file</span>(<span class="ruby-string">&#39;rb+&#39;</span>) <span class="ruby-keyword">do</span> &#x000A;    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">get_fields</span>&#x000A;    <span class="ruby-identifier">normalize_fields</span>&#x000A;    <span class="ruby-identifier">update_id3</span>&#x000A;    <span class="ruby-identifier">update_ape</span>&#x000A;    <span class="ruby-identifier">write_tag</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">fields</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
